<div class="comment-list">
  {{#each}}
    <div class="comment panel" {{bind-attr id=itemId}}>
      {{#if isEditing}}
        <div class="comment-form">
          {{#form-for controller action='save'}}
            <div class="row">
              <div class="small-12 columns">
                {{input body as="text"}}
              </div>
            </div>
            <div class="row">
              <div class="small-6 columns">
                {{submit "Save" class="button success expand"}}
              </div>
              <div class="small-6 columns">
                <button class="button secondary expand" {{action 'cancel'}}>Cancel</button>
              </div>
            </div>
          {{/form-for}}
        </div>
      {{else}}
        <div class="comment__body">
          {{format-markdown body}}
        </div>
      {{/if}}

      <div class="row">
        <div class="small-6 columns">
          <div class="comment-actions">
            {{#if canEdit}}
              <a class="comment-actions__edit" href="#" {{action 'edit'}}>Edit</a>
            {{/if}}
          </div>
        </div>
        <div class="small-6 columns">
          <div class="comment__author text-right">
            <p>@{{user.username}}</p>
          </div>
        </div>
      </div>
    </div>
  {{/each}}

  {{#if session.isAuthenticated}}
    <a class="add-comment button secondary tiny"
      href="#" {{action 'addComment'}}>
      <i class="fa fa-plus"></i> Comment
    </a>
  {{else}}
    {{link-to 'Log in to post a comment' 'login'}}
  {{/if}}
</div>
